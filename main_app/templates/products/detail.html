{% extends 'base.html' %} {% load static %} {% block head %}
<link rel="stylesheet" href="{% static 'css/products/product_detail.css' %}" />
{% endblock %} {% block content %}
<section class="product-container">
  <div class="product-details">
    <h1>{{ product.name }}</h1>
    <h2>Color: {{ product.color }}</h2>
    <h2>SKU: {{ product.sku }}</h2>
    <h2>Quantity: {{ product.quantity }}</h2>
    <h2>Price: ${{ product.price }}</h2>
  </div>
  <div class="product-actions">
    <a href="{% url 'product_update' product.id %}" class="btn warn">Edit</a>
    <a href="{% url 'product_delete' product.id %}" class="btn danger"
      >Delete</a
    >
  </div>
</section>

<div class="orders-container">
  <section class="orders">
    <div class="subsection-title">
      <h2>Orders</h2>
    </div>
    <h3>Order Inventory</h3>    
    <form action="{% url 'add_order' product.id %}" method="post" class="subsection-content" autocomplete="off">
      {% csrf_token %}
      {{ order_form.as_p }}
      <button type="submit" class="btn submit">Add Order</button>
    </form>

    <h3>Open Orders</h3>
    {% if product.order_set.all.count %}
    <table>
      <thead>
        <tr>
          <th>Quantity</th>
          <th>Date Ordered</th>
        </tr>
      </thead>
      <tbody>
        {% for order in product.order_set.all %}
        <tr>
          <td>{{order.quantity_ordered}}</td>
          <td>{{order.order_date}}</td>
        </tr>
        {% endfor %}
      </tbody>
    </table>
    {% else %}
    <div class="subsection-content">
      <p>⚠️ No open orders</p>
    </div>
    {% endif %}
  </section>
</div>
{% endblock %}
